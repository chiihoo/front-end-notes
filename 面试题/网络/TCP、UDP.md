**TCP是一个面向连接的、可靠的、基于字节流的传输层协议**

**UDP是一个面向无连接的传输层协议**



**面向连接**：客户端和服务端在通信之前，会通过TCP三次握手来建立连接，而UDP没有建立连接的过程

**可靠性**：有状态和可控制。TCP会精准的记录哪些数据发送了，哪些数据被对方接收了，并且数据包要按序到达，不允许半点差错。并且如果丢包了或网络环境差，TCP会自动调整发送速度或者是重发。

**基于字节流**：TCP发送报文时，会将应用层的数据写入缓冲区，用TCP协议来控制发送，发送的状态就是字节流。而UDP的数据传输是基于报文的，它没有缓冲区，会将应用层数据加包头直接交给网络层





物理层 - 数据链路层 - 网络层 - 传输层 - 应用层

​                                        IP            TCP      HTTP

​                                                       UDP      FTP

​                                                                     DNS



**TCP如何保证可靠连接的？**

* 校验和：反码相加 首部与数据的16位字节，结果取反，接收端要重新校验，如果失败，丢弃这个报文段

* 序列号和确认应答号
* 超时重传
* 三次握手、四次挥手
* 流量控制：接收端会在确认应答发送ACK报文时，将自己的即时窗口大小（缓冲区剩余大小）填入，发送方据此调节自己的发送速度
* 拥塞控制：网络没有出现拥塞，拥塞窗口就变大点，网络出现了拥塞，拥塞窗口就变小点