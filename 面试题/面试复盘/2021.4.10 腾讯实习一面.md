第一次碰到女面试官

开场自我介绍，之后说看意向是上海，而她这个部门是csig 腾讯云在深圳，问还有没有其他offer或者流程，我说美团二面十来天了。

她说你看我们还要不要再继续面下去，就节省一下时间，你有什么想法？

我还是想继续面，她说行，我明白了，就是还多个机会是吧，好的，先做题吧。

我当时听到这句话就懵了

出了四个题:

1. ES5写一个类，发布订阅，再写一个类继承它
2. 三题算法，排序相关，第一个O(n)时间复杂度的排序，不会，写了个快排
3. 两个从小到大排序的数组找中位数，如果长度加起来是偶数，中位数为中间的两个除以2，leetcode第4题，枯了，我当时看这题是困难，没写，我当场做的时候也不知道是这题
4. 给了几个选项，哪几个是csrf的防范方式。这里记岔了，选了个csp，其实是xss的防范方式。。。



我写到半个小时感觉很崩溃，跟面试官说，"面试官，我想了一下，我感觉我代码能力有点差，我想放弃"

面试官说"啊，为什么要放弃啊，我看你第一题都写出来了呀，来看看，说一下，如果要删除一个callback怎么做？"

之后我想了一会用了JSON.stringify写，之前正好看过这题

（菜了菜了，我想的是传匿名函数进去，结果可以直接传函数引用啊，用indexOf判断）

接着一题一题的过

她还问了Content-Security-Policy是做什么的，我就记得是显式的声明第三方请求可以使用哪些资源，还记错了。。。cry

注：csp是对浏览器显式的声明哪些外部资源是可以被加载和执行的，用于防范XSS



之后开始问问题：

1. **如果要在浏览器里面输入你这个项目网址，会发生什么？详细的说一下。**

balabala...



2. **如果用户点击了页面的某个地方，之后发生了卡顿，怎么排查原因？**



我回答的是我平常是怎么排查的，她追问你说的都是排查的方法，具体可能是什么原因？

答：想了一会，支支吾吾说了一下动画可能不是用的requestAnimationFrame。真不会。。。



提示：**有没有可能是耗时的操作？**

我引申回答了：对，有这个可能，可以web worker多开个线程

问：除了这个还有什么方法呢？

答：可以用setTimeout包裹起来，放到宏任务里面，因为UI的渲染会在宏任务之前完成

（setTimeout这个回答不对，应该可以用requestIdleCallback，它会使耗时任务在浏览器空闲时间被调用。时间分片）



https://zhuanlan.zhihu.com/p/144934079

长时间占用js线程
页面回流和重绘较多
资源加载阻塞





问：**还有没有可能是占用内存过大的原因？**

我还是有点懵，不知道

提示：**内存泄漏、内存回收之类？**

我补充说了一下：垃圾回收机制，引用计数，标记清除。引用计数有循环引用的问题，会导致内存泄漏，balabala...



问：**哪些情况会造成内存泄漏？**

答：闭包，闭包返回的函数要用一个变量接着，如果这个变量没有清除，就会造成内存泄漏。

还有循环引用的情况

还有一种情况是给dom绑定事件，如果删除了dom，但是没有删除绑定的这个回调函数，也会造成内存泄漏，解决方法是可以用weakMap来将dom和这个事件做一个绑定

（这里好像说错了，如果让我再说的话，1.意外的全局变量，2.循环引用，3.对象的某个属性保存了dom的引用，之后删除了这个dom，但是对象属性仍然保持着dom的引用，也会造成一个内存泄漏，可以用WeakMap解决，4.定时器忘记了清除，没有`clear`，而只是将`timerId = null`，定时器仍然存在，造成内存泄漏）



- 意外的全局变量引起的内存泄漏
- 闭包引起的内存泄漏
- 被遗忘的定时器
- 循环引用
- DOM删除时没有解绑事件
- 没有清理的DOM元素引用







还问了啥问题来着，忘了

你还有什么想问我的吗？

没有。真没啥想问的。面的很自闭



全程1小时15分钟，面完去做京东笔试，30题笔试，2题算法，时间太急，面试和京东笔试都是晚上7点开始的，京东笔试两个小时，只剩40分钟，最后没写出来，骗分，o(╥﹏╥)o